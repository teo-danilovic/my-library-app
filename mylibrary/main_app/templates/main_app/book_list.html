{% extends 'base.html' %}
{% block title %}My Books{% endblock %}


{% block content %}
<h1>My Books</h1>

{% if books %}
    {% for book in books %}
    <a href="{% url 'books_detail' book.id %}" class="book-link">
        <div class="card">
            <div class="card-content">
                <span class="card-title">{{ book.title }}</span>
                <p><strong>Author:</strong> {{ book.author }}</p>
                <p><strong>Status:</strong> {{ book.get_status_display }}</p>
                {% if book.publication_year %}
                    <p><strong>Published:</strong> {{ book.publication_year }}</p>
                {% endif %}
            </div>
            <div class="card-action">
                <a href="{% url 'books_detail' book.id %}" class="btn-small waves-effect waves-light blue">View Details</a>
            </div>
        </div>
        {% if book.photos.all %}
                <h2>Book Cover(s)</h2>
                <div class="row book-photos">
                    {% for photo in book.photos.all %}
                        <div class="col s12 m6 l4">
                            <img class="responsive-img card-panel" src="/books/covers/{{photo.key}}" alt="Cover for {{ book.title }}">
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>No cover image uploaded yet.</p>
            {% endif %}
    </a>
    {% endfor %}
{% else %}
    <p>You haven't added any books yet. <a href="{% url 'books_create' %}" class="btn waves-effect waves-light green">Add a Book</a></p>
{% endif %}

{% endblock %}

